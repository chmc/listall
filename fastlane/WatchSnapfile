# Snapfile for watchOS screenshot automation
# Captures automated screenshots for App Store submission

# Path to Xcode project
project "./ListAll/ListAll.xcodeproj"

# Watch simulator to use
# Note: Using Apple Watch Series 10 (46mm) - available in Xcode 16.1
devices([
  "Apple Watch Series 10 (46mm)"
])

# List of languages to generate screenshots for
languages([
  "en-US",
  "fi"
])

# The name of the scheme which contains the watchOS UI Tests
scheme("ListAllWatch Watch App")

# Where should the resulting screenshots be stored?
output_directory("./fastlane/screenshots/watch")

# Clear previous screenshots before generating new ones
clear_previous_screenshots(true)

# Override status bar
override_status_bar(true)

# Reinstall the app before each test run
reinstall_app(true)

# BUILD OPTIMIZATION: Build once, then reuse for all language combinations
# Prevents rebuilding for each language (en-US, fi), saving time
build_for_testing(true)
test_without_building(true)

# Generate xcresult bundle for detailed diagnostics
result_bundle(true)

# Run only the screenshot tests
only_testing([
  "ListAllWatch_Watch_AppUITests/ListAllWatch_Watch_AppUITests/testWatchScreenshots"
])

# Run devices concurrently for speed
concurrent_simulators(false)
