# Snapfile for Fastlane Snapshot automation
# Captures automated screenshots for App Store submission

# Path to Xcode project
project "./ListAll/ListAll.xcodeproj"

# List of simulators to use for screenshot generation
# Note: Using iPhone 15 Pro Max (available in Xcode 16.1 on GitHub Actions)
# iPhone 15 Pro Max is 6.7" which is acceptable for App Store 6.5" slot
devices([
  "iPhone 15 Pro Max",      # 6.7" display (closest to App Store 6.5" requirement)
  "iPad Pro 13-inch (M4)"   # 13" iPad Pro for App Store screenshots (force portrait via test code)
])

# List of languages to generate screenshots for
# Screenshots will be generated for both English and Finnish
languages([
  "en-US",
  "fi"
])

# The name of the scheme which contains the UI Tests
scheme("ListAll")

# Where should the resulting screenshots be stored?
output_directory("./fastlane/screenshots")

# Clear previous screenshots before generating new ones
clear_previous_screenshots(true)

# Remove the '#' from the image filename
override_status_bar(true)

# Reinstall the app before each test run
reinstall_app(true)

# Let snapshot build the app (more reliable in CI)
# Setting this to false means snapshot will build the app itself
test_without_building(false)

# Run devices concurrently for faster execution
concurrent_simulators(true)

# Only run the UI test target for screenshot capture (skip unit tests)
# This dramatically speeds up execution since unit tests already run in CI
only_testing(["ListAllUITests"])

# For more information about all available options run
# fastlane action snapshot
