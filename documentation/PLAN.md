# Plan: Replace duplicate iPad screenshot 3 with Sort/Filter sheet

## Context

With the iPad two-column layout, screenshots 02 (MainScreen) and 03 (GroceryItems) became identical â€” both show sidebar + Grocery Shopping items. We need screenshot 3 to show the **ItemOrganizationView** (sort/filter sheet) instead. The screenshot name also needs to change from `03_GroceryItems` to `03_SortFilter` everywhere, and marketing titles need updating.

Note: On iPhone, screenshot 2 shows the list of lists and screenshot 3 navigates into grocery items â€” so the old flow was already fine for iPhone. But showing the sort/filter sheet is a good improvement for both platforms, since it highlights an additional feature.

## Files to modify

### 1. Add accessibility identifier to sort/filter button
**File:** `ListAll/ListAll/Views/ListView.swift:291-298`

Add `.accessibilityIdentifier("SortFilterButton")` to the `arrow.up.arrow.down` button that triggers `showingOrganizationOptions`.

### 2. Add accessibility identifier to Done button in ItemOrganizationView
**File:** `ListAll/ListAll/Views/Components/ItemOrganizationView.swift:182`

Add `.accessibilityIdentifier("OrganizationDoneButton")` to the "Done" button. This provides a locale-independent wait target for the test (the button text is `String(localized: "Done")` which becomes "Valmis" in Finnish).

### 3. Handle iPad sheet presentation for screenshots
**File:** `ListAll/ListAll/Views/ListView.swift:351-353`

On iPad, `.sheet()` presents as a centered floating card (~60% of screen), not full-screen. This may look cramped in a marketing screenshot. Follow the same pattern used for the AddItem sheet (lines 337-342): use `fullScreenCover` when `isScreenshotMode` is true. **Verify visually first** â€” if the floating card actually looks good (showing the two-column layout behind it), this step can be skipped.

### 4. Rename and update the UI test
**File:** `ListAll/ListAllUITests/ListAllUITests_Simple.swift`

- Rename `testScreenshots03_GroceryItems()` â†’ `testScreenshots03_SortFilter()`
- After `launchAndNavigateToGroceryList()`, tap the sort/filter button via `app.buttons["SortFilterButton"]`
- Wait for the Organization sheet to appear using `app.buttons["OrganizationDoneButton"]` (locale-independent)
- Capture `snapshot("03_SortFilter")`

### 5. Update Snapfile
**File:** `fastlane/Snapfile:88`

Change: `testScreenshots03_GroceryItems` â†’ `testScreenshots03_SortFilter`

### 6. Update Fastfile (3 locations)
**File:** `fastlane/Fastfile`

- **Line 162**: Comment â€” update `03_GroceryItems` â†’ `03_SortFilter`
- **Line 227**: `only_testing` â€” update test method name
- **Line 1336**: `only_testing` â€” update test method name

### 7. Update Framefile.json
**File:** `fastlane/Framefile.json:38-48`

Change filter and marketing text:
```json
{
  "filter": "03_SortFilter",
  "title": {
    "en-US": "Sort & Filter Your Way",
    "fi": "Lajittele ja Suodata Helposti"
  },
  "subtitle": {
    "en-US": "Organize by name, date, or status",
    "fi": "JÃ¤rjestÃ¤ nimen, pÃ¤ivÃ¤n tai tilan mukaan"
  }
}
```

### 8. Update documentation
**File:** `documentation/PLAN.md:177`

Update the test description from GroceryItems to SortFilter.

### 9. Delete old screenshot files
Remove the old `03_GroceryItems` files from `fastlane/screenshots_compat/` (both locales, iPad only). New files with `03_SortFilter` name will be generated.

**Files to delete:**
- `fastlane/screenshots_compat/en-US/iPad Pro 13-inch (M4)-03_GroceryItems.png`
- `fastlane/screenshots_compat/fi/iPad Pro 13-inch (M4)-03_GroceryItems.png`
- `fastlane/screenshots_compat/en-US/iPhone 16 Pro Max-03_GroceryItems.png`
- `fastlane/screenshots_compat/fi/iPhone 16 Pro Max-03_GroceryItems.png`

### 11. Change English language flag from US to UK
**File:** `ListAll/ListAll/Utils/LocalizationManager.swift:37`

Change `case .english: return "ðŸ‡ºðŸ‡¸"` â†’ `case .english: return "ðŸ‡¬ðŸ‡§"`. This is used in the Settings language picker. Only one location in the codebase.

### 12. No changes needed
- `.github/scripts/generate-screenshots-local.sh` â€” doesn't reference screenshot names
- `.github/workflows/publish-to-appstore.yml` â€” validates by count (4 per locale), not by name
- `screenshots.html` â€” auto-generated by Fastlane, will be regenerated

## Verification

1. Build the app to pick up the new accessibility identifier
2. Boot iPad simulator, launch with UITEST_MODE, navigate to grocery list, tap sort/filter button â€” take screenshot to verify the sheet looks good
3. Boot iPhone simulator, do the same â€” verify sort/filter sheet appears
4. Run the UI test `testScreenshots03_SortFilter` on both iPhone and iPad simulators to confirm it passes
5. Verify Fastlane config is consistent (test names match across Snapfile, Fastfile)
